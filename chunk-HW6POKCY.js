import{a as H,b as q}from"./chunk-FTX6TQRQ.js";import{a as qe,b as Xe,c as Ke}from"./chunk-Z3EQ4EEQ.js";import{b as Ve}from"./chunk-YMZERERS.js";import{a as Qe,b as $e}from"./chunk-DGTYQ5GB.js";import{a as Se,b as Ie,c as ye,d as De,f as ke,g as Le}from"./chunk-ZNNSMIU4.js";import{g as Me,i as Pe,j as be,k as Oe,m as Fe,o as Ue,p as Te,q as Ne,r as Ae,t as Re,w as Be,y as He}from"./chunk-GX3J5JZJ.js";import{$ as D,Aa as re,Ab as Z,Ad as ve,Ba as P,Bb as W,Bd as we,Cd as T,Ea as le,Ed as N,Ha as p,Na as f,P as F,Sa as a,Sb as ce,Ta as r,Ua as E,Ub as de,Va as I,Vb as U,Vd as A,Wa as y,Wb as ue,Wd as R,Xb as fe,Xd as ze,Y as ne,Ya as C,Yb as ge,Zb as j,Zd as Ge,_d as je,ab as h,ac as _e,bc as O,ca as oe,cb as c,da as _,ea as x,ec as J,f as L,fb as X,gb as s,gc as xe,hb as S,ib as z,jb as Q,k as te,lb as ae,mb as se,pb as b,qb as G,qd as he,ra as B,tb as me,ub as pe,vd as Ce,w as V,xa as m,xb as $,xd as Ee,ya as M,yb as K,z as ie}from"./chunk-EOHTHAGE.js";import{e as k}from"./chunk-5FZOKLP6.js";function ot(e,l){if(e&1&&E(0,"img",10),e&2){let t=c();p("ngStyle",t.imagePreviewStyles)("src",t.file.imagePreviewUrl,B)}}function rt(e,l){if(e&1&&(a(0,"span",11),s(1),r()),e&2){let t=c();m(1),S(t.error)}}function lt(e,l){if(e&1&&E(0,"mat-progress-bar",12),e&2){let t=c();p("value",t.uploadProgress)}}function at(e,l){if(e&1){let t=C();a(0,"button",13),h("click",function(){_(t);let n=c();return x(n.fileDelete.next(n.fileIndex))}),a(1,"mat-icon"),s(2,"delete"),r()()}}function st(e,l){if(e&1){let t=C();a(0,"button",14),h("click",function(){_(t);let n=c();return x(n.fileRetry.next(n.file.id))}),a(1,"mat-icon"),s(2,"refresh"),r()()}}var Je=(()=>{let l=class l{constructor(){this.progressBarColor="primary",this.fileDelete=new P,this.fileRetry=new P}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=D({type:l,selectors:[["dominus-uploader-file"]],inputs:{fileIndex:"fileIndex",file:"file",imagePreviewStyles:"imagePreviewStyles",error:"error",uploadProgress:"uploadProgress",progressBarColor:"progressBarColor",allowDeleteAction:"allowDeleteAction",showImagePreview:"showImagePreview"},outputs:{fileDelete:"fileDelete",fileRetry:"fileRetry"},standalone:!0,features:[b],decls:11,vars:6,consts:[[1,"file"],[1,"preview"],["alt","Preview",3,"ngStyle","src",4,"ngIf"],[1,"info"],[1,"filename"],["class","error",4,"ngIf"],["class","progress",3,"value",4,"ngIf"],[1,"actions"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["alt","Preview",3,"ngStyle","src"],[1,"error"],[1,"progress",3,"value"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1),f(2,ot,1,2,"img",2),r(),a(3,"div",3)(4,"span",4),s(5),r(),f(6,rt,2,1,"span",5)(7,lt,1,1,"mat-progress-bar",6),r(),a(8,"div",7),f(9,at,3,0,"button",8)(10,st,3,0,"button",9),r()()),n&2&&(m(2),p("ngIf",o.error===""&&o.file.imagePreviewUrl),m(3),S(o.file.name),m(1),p("ngIf",o.error),m(1),p("ngIf",o.uploadProgress&&o.error===""),m(2),p("ngIf",o.allowDeleteAction&&o.file.progress===void 0),m(1),p("ngIf",o.file.id&&o.error!==""))},dependencies:[O,U,j,N,T,R,A,q,H],styles:[".file[_ngcontent-%COMP%]{display:flex;align-items:center}.file[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-right:15px}.file[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:contain}.file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-right:5px;min-width:50px}.file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]{margin-bottom:5px;max-width:140px;overflow:hidden;text-overflow:ellipsis}.file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--dominus-uploader-error-color, #f44336);margin-bottom:5px}.file[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center}.file[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0});let e=l;return e})();function mt(e,l){if(e&1&&E(0,"img",7),e&2){let t=c();p("ngStyle",t.imagePreviewStyles)("src",t.file.imagePreviewUrl,B)}}function pt(e,l){e&1&&E(0,"div",11)}function ct(e,l){if(e&1&&E(0,"mat-progress-bar",12),e&2){let t=c(2);p("color",t.progressBarColor)("value",t.uploadProgress)}}function dt(e,l){if(e&1&&(a(0,"div",13)(1,"span",14),s(2),r()()),e&2){let t=c(2);m(2),S(t.error)}}function ut(e,l){if(e&1&&(I(0),f(1,pt,1,0,"div",8)(2,ct,1,2,"mat-progress-bar",9)(3,dt,3,1,"div",10),y()),e&2){let t=c();m(1),p("ngIf",t.error===""),m(1),p("ngIf",t.uploadProgress&&t.error===""),m(1),p("ngIf",t.error!=="")}}function ft(e,l){if(e&1){let t=C();a(0,"button",15),h("click",function(){_(t);let n=c();return x(n.fileDelete.next(n.fileIndex))}),a(1,"mat-icon"),s(2,"delete"),r()()}}function gt(e,l){if(e&1){let t=C();a(0,"button",16),h("click",function(){_(t);let n=c();return x(n.fileRetry.next(n.file.id))}),a(1,"mat-icon"),s(2,"refresh"),r()()}}var Ye=(()=>{let l=class l{constructor(){this.progressBarColor="primary",this.fileDelete=new P,this.fileRetry=new P}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=D({type:l,selectors:[["dominus-uploader-image"]],inputs:{fileIndex:"fileIndex",file:"file",uploadProgress:"uploadProgress",progressBarColor:"progressBarColor",imagePreviewStyles:"imagePreviewStyles",error:"error",allowDeleteAction:"allowDeleteAction"},outputs:{fileDelete:"fileDelete",fileRetry:"fileRetry"},standalone:!0,features:[b],decls:7,vars:4,consts:[[1,"images-container"],[1,"image-preview"],["alt","",3,"ngStyle","src",4,"ngIf"],[4,"ngIf"],[1,"actions"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["alt","",3,"ngStyle","src"],["class","overlay",4,"ngIf"],["class","loader","mode","determinate",3,"color","value",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"overlay"],["mode","determinate",1,"loader",3,"color","value"],[1,"error-container"],[1,"error"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1),f(2,mt,1,2,"img",2)(3,ut,4,3,"ng-container",3),a(4,"div",4),f(5,ft,3,0,"button",5)(6,gt,3,0,"button",6),r()()()),n&2&&(m(2),p("ngIf",o.file.imagePreviewUrl),m(1),p("ngIf",o.file.id),m(2),p("ngIf",o.allowDeleteAction&&o.file.progress===void 0),m(1),p("ngIf",o.file.id&&o.error!==""))},dependencies:[O,U,j,q,H,N,T,R,A],styles:[".images-container[_ngcontent-%COMP%]{width:auto;height:auto}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:auto;height:auto;margin:10px 5px;position:relative}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:contain;width:auto;height:100%}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:var(--dominus-uploader-image-uploading-overlay, rgba(255, 255, 255, .6));position:absolute;width:auto;height:auto;inset:0}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{width:auto;position:absolute;top:50%;left:10%;right:10%}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{background-color:var(--dominus-uploader-image-error-container-background, rgba(255, 255, 255, .6))}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--dominus-uploader-error-color, #f44336)}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;top:-20px;left:3px}"],changeDetection:0});let e=l;return e})();var g=function(e){return e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.INVALID_EXTENSION=1]="INVALID_EXTENSION",e[e.MAX_SIZE_EXCEEDED=2]="MAX_SIZE_EXCEEDED",e[e.ALLOWED_EXTENSIONS=3]="ALLOWED_EXTENSIONS",e[e.MULTIPLE_NO_FILES_MESSAGE=4]="MULTIPLE_NO_FILES_MESSAGE",e[e.MULTIPLE_ADD_FILES_BTN=5]="MULTIPLE_ADD_FILES_BTN",e[e.SINGLE_NO_FILES_MESSAGE=6]="SINGLE_NO_FILES_MESSAGE",e[e.NO_IMAGE_MESSAGE=7]="NO_IMAGE_MESSAGE",e[e.IMAGE_SIZE_CHECK_FAILED=8]="IMAGE_SIZE_CHECK_FAILED",e[e.IMAGE_SIZE_CHECK_TEXT=9]="IMAGE_SIZE_CHECK_TEXT",e}(g||{}),et=new ne("Dominus uploader i18n strings");var xt=["uploaderContainer"],ht=["fileInput"];function Ct(e,l){if(e&1){let t=C();a(0,"dominus-uploader-file",14),h("fileDelete",function(n){_(t);let o=c(3);return x(o.removeFile(n))}),r()}if(e&2){let t=l.$implicit,i=l.index,n=c(3);p("fileIndex",i)("imagePreviewStyles",n.imagePreviewStyles)("file",t)("progressBarColor",n.progressBarColor)("allowDeleteAction",n.allowDeleteAction)("showImagePreview",n.showImagePreview)}}function Et(e,l){if(e&1){let t=C();a(0,"dominus-uploader-file",15),h("fileRetry",function(n){_(t);let o=c(3);return x(o.retryUpload(n))}),r()}if(e&2){let t=l.$implicit,i=c(3);p("fileIndex",t[0])("error",t[1].error)("imagePreviewStyles",i.imagePreviewStyles)("uploadProgress",t[1].progress)("file",t[1])("progressBarColor",i.progressBarColor)("allowDeleteAction",i.allowDeleteAction)("showImagePreview",i.showImagePreview)}}function vt(e,l){if(e&1&&(I(0),f(1,Ct,1,6,"dominus-uploader-file",12)(2,Et,1,8,"dominus-uploader-file",13),y()),e&2){let t=c(2);m(1),p("ngForOf",t._value),m(1),p("ngForOf",t.filesQueue.entries())}}function wt(e,l){if(e&1&&(a(0,"span",19)(1,"span"),s(2),r(),s(3),r()),e&2){let t=c(3);m(2),S(t.intl[t.DominusUploaderIntl.ALLOWED_EXTENSIONS]),m(1),z(" ",t.allowedExtensions.join(", ")," ")}}function St(e,l){if(e&1&&(a(0,"span"),s(1),r()),e&2){let t=c(3);m(1),Q("",t.intl[t.DominusUploaderIntl.IMAGE_SIZE_CHECK_TEXT]," ",t.maxImageSizeText,"")}}function It(e,l){if(e&1&&(a(0,"div",16)(1,"h3"),s(2),r(),f(3,wt,4,2,"span",17)(4,St,2,2,"span",18),r()),e&2){let t=c(2);m(2),S(t.intl[t.DominusUploaderIntl.MULTIPLE_NO_FILES_MESSAGE]),m(1),p("ngIf",t.allowedExtensions.length),m(1),p("ngIf",t.maxImageSizeText)}}function yt(e,l){if(e&1){let t=C();I(0),a(1,"div",8)(2,"button",9),h("click",function(){_(t);let n=c();return x(n.openFilesInput())}),a(3,"mat-icon"),s(4,"add"),r(),s(5),r()(),f(6,vt,3,2,"ng-container",10)(7,It,5,3,"ng-template",null,11,W),y()}if(e&2){let t=X(8),i=c();m(5),z(" ",i.intl[i.DominusUploaderIntl.MULTIPLE_ADD_FILES_BTN]," "),m(1),p("ngIf",i.hasFiles||i.filesQueue.has(i.lastFileId))("ngIfElse",t)}}function Dt(e,l){if(e&1){let t=C();a(0,"dominus-uploader-file",22),h("fileDelete",function(n){_(t);let o=c(2);return x(o.removeFile(n))})("fileRetry",function(n){_(t);let o=c(2);return x(o.retryUpload(n))}),r()}if(e&2){let t=c(2),i,n;p("fileIndex",0)("imagePreviewStyles",t.imagePreviewStyles)("error",((i=t.filesQueue.get(t.lastFileId))==null?null:i.error)||"")("uploadProgress",(n=t.filesQueue.get(t.lastFileId))==null?null:n.progress)("file",t.hasFiles?t._value[0]:t.filesQueue.get(t.lastFileId))("progressBarColor",t.progressBarColor)}}function Mt(e,l){if(e&1){let t=C();I(0),a(1,"div",8)(2,"button",20),h("click",function(){_(t);let n=c();return x(n.openFilesInput())}),a(3,"mat-icon"),s(4,"attach_file"),r()()(),f(5,Dt,1,6,"dominus-uploader-file",21),y()}if(e&2){let t=c();m(5),p("ngIf",t.hasFiles||t.filesQueue.has(t.lastFileId))}}function Pt(e,l){if(e&1){let t=C();a(0,"dominus-uploader-image",27),h("fileDelete",function(n){_(t);let o=c(4);return x(o.removeFile(n))}),r()}if(e&2){let t=l.$implicit,i=l.index,n=c(4);p("fileIndex",i)("file",t)("progressBarColor",n.progressBarColor)("imagePreviewStyles",n.imagePreviewStyles)("allowDeleteAction",n.allowDeleteAction)}}function bt(e,l){if(e&1&&(I(0),f(1,Pt,1,5,"dominus-uploader-image",26),y()),e&2){let t=c(3);m(1),p("ngForOf",t._value)}}function Ot(e,l){if(e&1){let t=C();a(0,"dominus-uploader-image",28),h("fileRetry",function(n){_(t);let o=c(3);return x(o.retryUpload(n))}),r()}if(e&2){let t=l.$implicit,i=c(3);p("fileIndex",t[0])("error",t[1].error)("uploadProgress",t[1].progress)("file",t[1])("progressBarColor",i.progressBarColor)("imagePreviewStyles",i.imagePreviewStyles)("allowDeleteAction",i.allowDeleteAction)}}function Ft(e,l){if(e&1&&(I(0),a(1,"div",24),f(2,bt,2,1,"ng-container",18)(3,Ot,1,7,"dominus-uploader-image",25),r(),y()),e&2){let t=c(2);m(2),p("ngIf",t.multiple||t.filesQueue.size===0),m(1),p("ngForOf",t.filesQueue.entries())}}function Ut(e,l){if(e&1){let t=C();I(0),a(1,"div",8)(2,"button",23),h("click",function(){_(t);let n=c();return x(n.openFilesInput())}),a(3,"mat-icon"),s(4,"add"),r()()(),f(5,Ft,4,2,"ng-container",10),y()}if(e&2){let t=c(),i=X(7);m(5),p("ngIf",t.hasFiles||t.filesQueue.has(t.lastFileId))("ngIfElse",i)}}function Tt(e,l){if(e&1&&(a(0,"span",19)(1,"span"),s(2),r(),s(3),r()),e&2){let t=c(2);m(2),S(t.intl[t.DominusUploaderIntl.ALLOWED_EXTENSIONS]),m(1),z(" ",t.allowedExtensions.join(", ")," ")}}function Nt(e,l){if(e&1&&(a(0,"span"),s(1),r()),e&2){let t=c(2);m(1),Q("",t.intl[t.DominusUploaderIntl.IMAGE_SIZE_CHECK_TEXT]," ",t.maxImageSizeText,"")}}function At(e,l){if(e&1&&(a(0,"div",16)(1,"h3"),s(2),r(),f(3,Tt,4,2,"span",17)(4,Nt,2,2,"span",18),r()),e&2){let t=c();m(2),S(t.intl[t.DominusUploaderIntl.NO_IMAGE_MESSAGE]),m(1),p("ngIf",t.allowedExtensions.length),m(1),p("ngIf",t.maxImageSizeText)}}var tt=(()=>{let l=class l extends qe{constructor(i,n,o,d,u){super(o),this.http=i,this.changeDetector=n,this.parentFormField=u,this.id=`dm-uploader-${l.nextId++}`,this.fileSaveEndpointRequestMethod="POST",this.fileDeleteEndpointRequestMethod="DELETE",this.multiple=!1,this.type="file-uploader",this.progressBarColor="primary",this.allowedExtensions=[],this.maxFileSize=5*1024*1024,this.allowDeleteAction=!0,this.showImagePreview=!0,this.imagePreviewStyles={"max-width":"200px"},this.uploadFinished=new P,this.containerClasses={container:!0,multiple:!1,"mat-form-field":!1,dragover:!1,"image-uploader":!1},this._value=[],this.lastFileId=0,this.filesQueue=new Map,this.maxImageSizeText="",this.hasFiles=!1,this.DominusUploaderIntl=g,this.componentDestroyed$=new L,this.viewInit=!1,this.containerClasses["mat-form-field"]=!!u,this.intl=Object.assign({[g.UNKNOWN_ERROR]:"Upload Failed!",[g.INVALID_EXTENSION]:"Invalid file extension!",[g.MAX_SIZE_EXCEEDED]:"File size is too big!",[g.MULTIPLE_NO_FILES_MESSAGE]:"Drop files here.",[g.SINGLE_NO_FILES_MESSAGE]:"No file",[g.ALLOWED_EXTENSIONS]:"Allowed Extensions:",[g.MULTIPLE_ADD_FILES_BTN]:"Add files",[g.NO_IMAGE_MESSAGE]:"Drop images here.",[g.IMAGE_SIZE_CHECK_FAILED]:"Maximum width or height exceeded.",[g.IMAGE_SIZE_CHECK_TEXT]:"Allowed image dimensions (HxW):"},d||{})}ngOnChanges(i){i.multiple&&(this.containerClasses.multiple=this.multiple),i.type&&(this.containerClasses["image-uploader"]=this.type==="image-uploader"),i.maxImageSize&&this.maxImageSize?.length&&(this.maxImageSizeText=this.maxImageSize.map(n=>n.height+"x"+n.width).join(", ")),this.viewInit&&(this.changeDetector.markForCheck(),this.stateChanges.next())}ngAfterViewInit(){let i=this.parentFormField?._elementRef.nativeElement||this.uploaderContainer.nativeElement;V(i,"dragover").pipe(F(this.componentDestroyed$)).subscribe(n=>this.onDragOver(n)),V(i,"dragleave").pipe(F(this.componentDestroyed$)).subscribe(n=>this.onDragLeave(n)),V(i,"drop").pipe(F(this.componentDestroyed$)).subscribe(n=>this.onFilesDropped(n)),this.viewInit=!0}openFilesInput(){this.fileInput.nativeElement.click()}get value(){return this._value}set value(i){i=i||[],Array.isArray(i)||(i=[i]),this._value=i,this.hasFiles=this._value.length>0,this.onChange(i),this.changeDetector.markForCheck(),this.stateChanges.next()}get shouldLabelFloat(){return!0}get empty(){return this.value.length===0}onFilesAdded(i){if(!(i&&i.length))return;let n=this.multiple?i:[i[0]];for(let o=n.length;o--;){let d=n[o];this.checkFile(d).then(u=>{let w={id:++this.lastFileId,name:d.name,progress:0,size:d.size,error:u,canRetryUpload:u==="",imagePreviewUrl:d.type.includes("image")?URL.createObjectURL(d):"",file:d};this.filesQueue.set(w.id,w),u===""?this.uploadFile(w).then():this.changeDetector.markForCheck()})}this.fileInput.nativeElement.value=""}uploadFile(i){return k(this,null,function*(){let n=new FormData,o=i.file;n.append("file",o);let d=this.fileSaveEndpointRequestHeaders instanceof Promise?yield this.fileSaveEndpointRequestHeaders:this.fileSaveEndpointRequestHeaders;this.http.request(this.fileSaveEndpointRequestMethod,this.fileSaveEndpoint,{reportProgress:!0,observe:"events",body:n,headers:d}).pipe(ie(()=>(i.error=this.intl[g.UNKNOWN_ERROR],i.progress=0,this.changeDetector.markForCheck(),te(null)))).subscribe(u=>{if(u)switch(u.type){case J.UploadProgress:i.progress=Math.floor(u.loaded/(u.total||1)*100),this.changeDetector.markForCheck();break;case J.Response:this.multiple||(this._value=[]);let w=this._value;w.push({name:o.name,size:o.size,type:o.type,imagePreviewUrl:o.type.includes("image")?URL.createObjectURL(o):"",data:u.body||{}}),this.filesQueue.delete(i.id),this.value=w;break}})})}retryUpload(i){let n=this.filesQueue.get(i);if(n){if(!n.canRetryUpload){this.filesQueue.delete(i);return}this.uploadFile(n).then()}}removeFile(i){return k(this,null,function*(){let n=this._value.splice(i,1)[0];if(this.fileDeleteEndpoint){let o=this.fileDeleteEndpointRequestHeaders instanceof Promise?yield this.fileDeleteEndpointRequestHeaders:this.fileDeleteEndpointRequestHeaders;this.http.request(this.fileDeleteEndpointRequestMethod,this.fileDeleteEndpoint,{body:[n],headers:o}).subscribe()}this.hasFiles=this._value.length>0,this.changeDetector.markForCheck()})}onDragOver(i){i.preventDefault(),i.stopPropagation(),this.containerClasses.dragover=!0,this.changeDetector.markForCheck()}onDragLeave(i){i.preventDefault(),i.stopPropagation(),this.containerClasses.dragover=!1,this.changeDetector.markForCheck()}onFilesDropped(i){let n=i.dataTransfer?.files;n&&(i.preventDefault(),i.stopPropagation(),this.onFilesAdded(n)),this.containerClasses.dragover=!1,this.changeDetector.markForCheck()}checkFile(i){return k(this,null,function*(){let n=this.allowedExtensions;if(n.length){let o=i.name.lastIndexOf("."),d;if(o<0)d=!1;else{let u=i.name.substring(o+1).toLowerCase();d=n.indexOf(u)!==-1}if(!d)return this.intl[g.INVALID_EXTENSION]}if(i.size>this.maxFileSize)return this.intl[g.MAX_SIZE_EXCEEDED];if(i.type.includes("image")&&this.maxImageSize?.length){let o=this.maxImageSize,d=yield this.getImageSize(URL.createObjectURL(i)),u=!0;for(let w=o.length;w--;){let v=o[w];if(v.width!==void 0&&v.height!==void 0&&v.width===d.width&&v.height===d.height){u=!1;break}else if(v.width!==void 0&&v.height===void 0&&v.width===d.width){u=!1;break}else if(v.height!==void 0&&v.width===void 0&&v.height===d.height){u=!1;break}}if(u)return this.intl[g.IMAGE_SIZE_CHECK_FAILED]}return""})}getImageSize(i){return k(this,null,function*(){return new Promise((n,o)=>{let d=new Image;d.onload=()=>{n({width:d.width,height:d.height})},d.onerror=()=>{o("Error loading image")},d.src=i})})}ngOnDestroy(){super.ngOnDestroy(),this.componentDestroyed$.next(),this.componentDestroyed$.complete()}};l.nextId=0,l.\u0275fac=function(n){return new(n||l)(M(xe),M(re),M(Pe,10),M(et,8),M(ye,8))},l.\u0275cmp=D({type:l,selectors:[["dm-uploader"]],viewQuery:function(n,o){if(n&1&&(K(xt,5),K(ht,5)),n&2){let d;$(d=Z())&&(o.uploaderContainer=d.first),$(d=Z())&&(o.fileInput=d.first)}},inputs:{fileSaveEndpoint:"fileSaveEndpoint",fileSaveEndpointRequestMethod:"fileSaveEndpointRequestMethod",fileSaveEndpointRequestHeaders:"fileSaveEndpointRequestHeaders",fileDeleteEndpoint:"fileDeleteEndpoint",fileDeleteEndpointRequestMethod:"fileDeleteEndpointRequestMethod",fileDeleteEndpointRequestHeaders:"fileDeleteEndpointRequestHeaders",multiple:"multiple",type:"type",progressBarColor:"progressBarColor",allowedExtensions:"allowedExtensions",maxFileSize:"maxFileSize",allowDeleteAction:"allowDeleteAction",showImagePreview:"showImagePreview",imagePreviewStyles:"imagePreviewStyles",maxImageSize:"maxImageSize",value:"value"},outputs:{uploadFinished:"uploadFinished"},standalone:!0,features:[se([{provide:Ie,useExisting:l}]),le,oe,b],decls:10,vars:6,consts:[[3,"ngClass"],["uploaderContainer",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["noImagePlaceholder",""],["type","file",3,"accept","multiple","change"],["fileInput",""],[1,"actions"],["type","button","mat-raised-button","","color","primary",3,"click"],[4,"ngIf","ngIfElse"],["noFilesMultiple",""],["error","",3,"fileIndex","imagePreviewStyles","file","progressBarColor","allowDeleteAction","showImagePreview","fileDelete",4,"ngFor","ngForOf"],[3,"fileIndex","error","imagePreviewStyles","uploadProgress","file","progressBarColor","allowDeleteAction","showImagePreview","fileRetry",4,"ngFor","ngForOf"],["error","",3,"fileIndex","imagePreviewStyles","file","progressBarColor","allowDeleteAction","showImagePreview","fileDelete"],[3,"fileIndex","error","imagePreviewStyles","uploadProgress","file","progressBarColor","allowDeleteAction","showImagePreview","fileRetry"],[1,"no-files-multiple"],["class","allowed-extensions",4,"ngIf"],[4,"ngIf"],[1,"allowed-extensions"],["mat-mini-fab","","type","button","color","primary",1,"upload-btn",3,"click"],[3,"fileIndex","imagePreviewStyles","error","uploadProgress","file","progressBarColor","fileDelete","fileRetry",4,"ngIf"],[3,"fileIndex","imagePreviewStyles","error","uploadProgress","file","progressBarColor","fileDelete","fileRetry"],["type","button","mat-mini-fab","","color","primary",3,"click"],[1,"image-previews"],[3,"fileIndex","error","uploadProgress","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileRetry",4,"ngFor","ngForOf"],["error","",3,"fileIndex","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileDelete",4,"ngFor","ngForOf"],["error","",3,"fileIndex","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileDelete"],[3,"fileIndex","error","uploadProgress","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileRetry"]],template:function(n,o){n&1&&(a(0,"div",0,1),I(2,2),f(3,yt,9,3,"ng-container",3)(4,Mt,6,1,"ng-container",3)(5,Ut,6,2,"ng-container",4)(6,At,5,3,"ng-template",null,5,W),y(),r(),a(8,"input",6,7),h("change",function(u){return o.onFilesAdded(u.target.files)}),r()),n&2&&(p("ngClass",o.containerClasses),m(2),p("ngSwitch",o.multiple),m(1),p("ngSwitchCase",!0),m(1),p("ngSwitchCase",!1),m(4),p("accept",o.allowedExtensions.length?"."+o.allowedExtensions.join(",."):null)("multiple",o.multiple))},dependencies:[O,ce,de,U,ue,fe,ge,R,A,N,we,T,Je,Ye],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100px;padding:10px}.container.multiple[_ngcontent-%COMP%]:not(.mat-form-field), .container.image-uploader[_ngcontent-%COMP%]:not(.mat-form-field){border:1px dotted var(--dominus-uploader-file-default-border-color, #cecece)}.container.multiple[_ngcontent-%COMP%]:not(.mat-form-field).dragover, .container.image-uploader[_ngcontent-%COMP%]:not(.mat-form-field).dragover{border-color:var(--dominus-uploader-file-hover-border-color, cornflowerblue)}.container[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .no-files-multiple[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .no-files-single[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .no-files-single[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:15px}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;margin-bottom:25px}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}"],changeDetection:0});let e=l;return e})();var it={html:`
<form [formGroup]="form">
    <h3>Configuration</h3>

    <section formGroupName="config" class="dm:grid">
        <mat-form-field class="dm:col-fixed">
            <mat-label>Type</mat-label>
            <mat-select formControlName="type">
                <mat-option value="file-uploader">file-uploader</mat-option>
                <mat-option value="image-uploader">image-uploader</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-checkbox color="primary" formControlName="multiple" class="dm:col-fixed">Multiple</mat-checkbox>
    </section>

    <br>
    <h3>Result</h3>
    <mat-form-field class="dm:col-12">
        <mat-label>Uploader</mat-label>
        <dm-uploader
            formControlName="value"
            [multiple]="!!form.get(['config', 'multiple'])?.value"
            [type]="form.get(['config', 'type'])?.value || 'file-uploader'"
            [allowedExtensions]="form.get(['config', 'allowedExtensions'])?.value || ['txt', 'pdf']"
            fileSaveEndpoint="https://localhost/uploader/upload"
            fileDeleteEndpoint="https://localhost/uploader/delete"></dm-uploader>
    </mat-form-field>
</form>
<br><br>
<h3>Form Value</h3>
<pre>{{ form.get('value')?.value | json }}</pre>
    `,ts:`
import {Component} from '@angular/core';
import {CommonModule} from '@angular/common';
import {MatCardModule} from "@angular/material/card";
import {MatTabsModule} from "@angular/material/tabs";
import {ReactiveFormsModule, UntypedFormBuilder, UntypedFormGroup} from "@angular/forms";
import {DmUploaderComponent} from "../../../../../dm-uploader/src/lib/dm-uploader.component";
import {UploaderDocsComponent} from "./uploader-docs/uploader-docs.component";
import {MatInputModule} from "@angular/material/input";
import {MatCheckboxModule} from "@angular/material/checkbox";
import {MatSelectModule} from "@angular/material/select";
import {ComponentDocHeaderComponent} from "../../components/component-doc-header/component-doc-header.component";
import {CodeExampleComponent} from "../../components/code-example/code-example.component";
import {dmUploaderCodeExample} from "./dm-uploader-code-example";

@Component({
    selector: 'app-dm-uploader-docs',
    standalone: true,
    imports: [CommonModule, MatCardModule, MatTabsModule, ReactiveFormsModule, DmUploaderComponent, UploaderDocsComponent, MatInputModule, MatCheckboxModule, MatSelectModule, ComponentDocHeaderComponent, CodeExampleComponent],
    templateUrl: './dm-uploader-docs.component.html',
    styleUrl: './dm-uploader-docs.component.scss'
})
export class DmUploaderDocsComponent {
    form: UntypedFormGroup;

    constructor(
        fb: UntypedFormBuilder,
    ) {
        this.form = fb.group({
            value: [[]],
            config: fb.group({
                multiple: [true],
                type: ['file-uploader'],
                allowedExtensions: [['txt', 'pdf']]
            })
        });
    }
}
    `,styles:""};var Rt=()=>["config","multiple"],kt=()=>["config","maxFileSize"],Lt=()=>["config","type"],Zi=(()=>{let l=class l{constructor(i){this.dmUploaderCodeExample=it,this.allowedExtensions=["txt","pdf","docx","xlsx"],this.componentDestroyed$=new L,this.form=i.group({value:[[]],config:i.group({multiple:["1"],type:["file-uploader"],allowedExtensions:[["txt","pdf","docx","xlsx"]],maxFileSize:[5]})}),this.form.get(["config","allowedExtensions"])?.valueChanges.pipe(F(this.componentDestroyed$)).subscribe(n=>{this.allowedExtensions=n.slice()}),this.form.get(["config","type"])?.valueChanges.pipe(F(this.componentDestroyed$)).subscribe(n=>{n==="image-uploader"?this.form.get(["config","allowedExtensions"])?.setValue(["png","gif","jpg","jpeg"]):this.form.get(["config","allowedExtensions"])?.setValue(["txt","pdf","docx","xlsx"])})}ngOnDestroy(){this.componentDestroyed$.next(),this.componentDestroyed$.complete()}};l.\u0275fac=function(n){return new(n||l)(M(Ae))},l.\u0275cmp=D({type:l,selectors:[["app-dm-uploader-docs"]],standalone:!0,features:[b],decls:88,vars:20,consts:[["title","Dominus uploader","titleLink","https://www.npmjs.com/package/@ng-dominus/dm-uploader"],["label","Overview"],[3,"code"],[3,"formGroup"],["formGroupName","config",1,"dm:grid"],[1,"dm:col-12"],["formControlName","allowedExtensions"],[1,"dm:col-fixed"],["formControlName","type"],["value","file-uploader"],["value","image-uploader"],["formControlName","multiple"],["value","1"],["value","0"],["type","text","matInput","","formControlName","maxFileSize"],["formControlName","value","fileSaveEndpoint","https://localhost/uploader/upload","fileDeleteEndpoint","https://localhost/uploader/delete",3,"multiple","maxFileSize","type","allowedExtensions"],["label","Api"],["label","Internationalization"],[1,"dm:quote"],[1,"dm:quote","code"],["label","Styling"]],template:function(n,o){if(n&1&&(a(0,"app-component-doc-header",0)(1,"p"),s(2,"Angular material based library that handles file uploads."),r()(),a(3,"mat-card")(4,"mat-card-content")(5,"mat-tab-group")(6,"mat-tab",1)(7,"mat-card-content")(8,"app-code-example",2)(9,"form",3)(10,"h3"),s(11,"Configuration"),r(),a(12,"section",4)(13,"mat-form-field",5)(14,"mat-label"),s(15,"[allowedExtensions]"),r(),E(16,"dm-tags",6),r(),a(17,"mat-form-field",7)(18,"mat-label"),s(19,"[type]"),r(),a(20,"mat-select",8)(21,"mat-option",9),s(22,"file-uploader"),r(),a(23,"mat-option",10),s(24,"image-uploader"),r()()(),a(25,"mat-form-field",7)(26,"mat-label"),s(27,"[multiple]"),r(),a(28,"mat-select",11)(29,"mat-option",12),s(30,"Allow multiple files"),r(),a(31,"mat-option",13),s(32,"Single file"),r()()(),a(33,"mat-form-field",7)(34,"mat-label"),s(35,"[maxFileSize]"),r(),E(36,"input",14),r()(),E(37,"br"),a(38,"h3"),s(39,"Result"),r(),a(40,"mat-form-field",5)(41,"mat-label"),s(42,"Uploader"),r(),E(43,"dm-uploader",15),r()(),E(44,"br")(45,"br"),a(46,"h3"),s(47,"Form Value"),r(),a(48,"pre"),s(49),me(50,"json"),r()()()(),a(51,"mat-tab",16)(52,"mat-card-content"),E(53,"app-uploader-docs"),r()(),a(54,"mat-tab",17)(55,"mat-card-content")(56,"p"),s(57,"Internationalization can be achieved by using the "),a(58,"span",18),s(59,"DOMINUS_UPLOADER_INTL"),r(),s(60," injection token, and passing an object of strings using the "),a(61,"span",18),s(62,"DominusUploaderIntl"),r(),s(63," members as keys."),r(),a(64,"pre")(65,"code",19),s(66),r()()()(),a(67,"mat-tab",20)(68,"mat-card-content")(69,"p"),s(70,"Override colors using the following css variables:"),r(),a(71,"ul")(72,"li")(73,"span",18),s(74,"--dominus-uploader-error-color"),r(),s(75,": Error text color"),r(),a(76,"li")(77,"span",18),s(78,"--dominus-uploader-file-hover-border-color"),r(),s(79,": Border color when hovering over with a file"),r(),a(80,"li")(81,"span",18),s(82,"--dominus-uploader-image-uploading-overlay"),r(),s(83,": Overlay color applied to images that are uploading "),r(),a(84,"li")(85,"span",18),s(86,"--dominus-uploader-image-error-container-background"),r(),s(87,": Background colo applied to the error container "),r()()()()()()()),n&2){let d,u,w,v;m(8),p("code",o.dmUploaderCodeExample),m(1),p("formGroup",o.form),m(34),p("multiple",((d=o.form.get(G(17,Rt)))==null?null:d.value)==="1")("maxFileSize",(((u=o.form.get(G(18,kt)))==null?null:u.value)||5)*1025*1024)("type",((w=o.form.get(G(19,Lt)))==null?null:w.value)||"file-uploader")("allowedExtensions",o.allowedExtensions),m(6),S(pe(50,15,(v=o.form.get("value"))==null?null:v.value)),m(17),ae("@Component(","{",`
    ...
    providers: [`,"{",`
        provide: DOMINUS_UPLOADER_INTL,
        useValue: `,"{",`
            [DominusUploaderIntl.UNKNOWN_ERROR]: 'Upload Failed'
            ...
        `,"}",`
    `,"}",`]
`,"}",`)
export class UploaderDemoComponent `,"{",`
    ...
`,"}","")}},dependencies:[O,_e,ve,Ce,Ee,je,ze,Ge,Re,Fe,Me,be,Oe,Ue,Ne,Te,tt,Xe,$e,Qe,De,Se,Ve,Le,ke,he,Be,He,Ke]});let e=l;return e})();export{Zi as DmUploaderDocsComponent};
