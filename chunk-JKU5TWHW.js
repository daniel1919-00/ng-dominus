import{a as H,b as q}from"./chunk-FTX6TQRQ.js";import{a as je,b as Xe}from"./chunk-JKBJOFPE.js";import{a as Le,b as Be}from"./chunk-YMZERERS.js";import{b as Qe}from"./chunk-DGTYQ5GB.js";import{a as Ie,b as Se,c as ye,d as Me,f as Re,g as ke}from"./chunk-ZNNSMIU4.js";import{i as De,j as Pe,k as be,m as Oe,o as Fe,p as Ue,q as Te,r as Ne,t as Ae,w as Ve,y as qe}from"./chunk-GX3J5JZJ.js";import{$ as M,Aa as re,Ab as Z,Ad as ve,Ba as P,Bb as W,Bd as we,Cd as U,Ea as ae,Ed as T,Ha as p,Na as f,P as B,Sa as l,Sb as ce,Ta as a,Ua as v,Ub as de,Va as I,Vb as F,Vd as N,Wa as S,Wb as ue,Wd as A,Xb as fe,Xd as Ge,Y as ne,Ya as x,Yb as ge,Zb as z,Zd as ze,_d as He,ab as C,ac as _e,bc as O,ca as oe,cb as c,da as _,ea as h,ec as $,f as ee,fb as j,gb as m,gc as he,hb as w,ib as G,jb as X,k as te,lb as le,mb as se,pb as b,qb as k,qd as Ce,ra as V,tb as me,ub as pe,vd as xe,w as L,xa as s,xb as Q,xd as Ee,ya as D,yb as K,z as ie}from"./chunk-EOHTHAGE.js";import{e as R}from"./chunk-5FZOKLP6.js";function it(e,r){if(e&1&&v(0,"img",10),e&2){let t=c();p("ngStyle",t.imagePreviewStyles)("src",t.file.imagePreviewUrl,V)}}function nt(e,r){if(e&1&&(l(0,"span",11),m(1),a()),e&2){let t=c();s(1),w(t.error)}}function ot(e,r){if(e&1&&v(0,"mat-progress-bar",12),e&2){let t=c();p("value",t.uploadProgress)}}function rt(e,r){if(e&1){let t=x();l(0,"button",13),C("click",function(){_(t);let n=c();return h(n.fileDelete.next(n.fileIndex))}),l(1,"mat-icon"),m(2,"delete"),a()()}}function at(e,r){if(e&1){let t=x();l(0,"button",14),C("click",function(){_(t);let n=c();return h(n.fileRetry.next(n.file.id))}),l(1,"mat-icon"),m(2,"refresh"),a()()}}var We=(()=>{let r=class r{constructor(){this.progressBarColor="primary",this.fileDelete=new P,this.fileRetry=new P}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=M({type:r,selectors:[["dominus-uploader-file"]],inputs:{fileIndex:"fileIndex",file:"file",imagePreviewStyles:"imagePreviewStyles",error:"error",uploadProgress:"uploadProgress",progressBarColor:"progressBarColor",allowDeleteAction:"allowDeleteAction",showImagePreview:"showImagePreview"},outputs:{fileDelete:"fileDelete",fileRetry:"fileRetry"},standalone:!0,features:[b],decls:11,vars:6,consts:[[1,"file"],[1,"preview"],["alt","Preview",3,"ngStyle","src",4,"ngIf"],[1,"info"],[1,"filename"],["class","error",4,"ngIf"],["class","progress",3,"value",4,"ngIf"],[1,"actions"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["alt","Preview",3,"ngStyle","src"],[1,"error"],[1,"progress",3,"value"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"]],template:function(n,o){n&1&&(l(0,"div",0)(1,"div",1),f(2,it,1,2,"img",2),a(),l(3,"div",3)(4,"span",4),m(5),a(),f(6,nt,2,1,"span",5)(7,ot,1,1,"mat-progress-bar",6),a(),l(8,"div",7),f(9,rt,3,0,"button",8)(10,at,3,0,"button",9),a()()),n&2&&(s(2),p("ngIf",o.error===""&&o.file.imagePreviewUrl),s(3),w(o.file.name),s(1),p("ngIf",o.error),s(1),p("ngIf",o.uploadProgress&&o.error===""),s(2),p("ngIf",o.allowDeleteAction&&o.file.progress===void 0),s(1),p("ngIf",o.file.id&&o.error!==""))},dependencies:[O,F,z,T,U,A,N,q,H],styles:[".file[_ngcontent-%COMP%]{display:flex;align-items:center}.file[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-right:15px}.file[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:contain}.file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-right:5px;min-width:50px}.file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]{margin-bottom:5px;max-width:140px;overflow:hidden;text-overflow:ellipsis}.file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--dominus-uploader-error-color, #f44336);margin-bottom:5px}.file[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center}.file[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0});let e=r;return e})();function lt(e,r){if(e&1&&v(0,"img",7),e&2){let t=c();p("ngStyle",t.imagePreviewStyles)("src",t.file.imagePreviewUrl,V)}}function st(e,r){e&1&&v(0,"div",11)}function mt(e,r){if(e&1&&v(0,"mat-progress-bar",12),e&2){let t=c(2);p("color",t.progressBarColor)("value",t.uploadProgress)}}function pt(e,r){if(e&1&&(l(0,"div",13)(1,"span",14),m(2),a()()),e&2){let t=c(2);s(2),w(t.error)}}function ct(e,r){if(e&1&&(I(0),f(1,st,1,0,"div",8)(2,mt,1,2,"mat-progress-bar",9)(3,pt,3,1,"div",10),S()),e&2){let t=c();s(1),p("ngIf",t.error===""),s(1),p("ngIf",t.uploadProgress&&t.error===""),s(1),p("ngIf",t.error!=="")}}function dt(e,r){if(e&1){let t=x();l(0,"button",15),C("click",function(){_(t);let n=c();return h(n.fileDelete.next(n.fileIndex))}),l(1,"mat-icon"),m(2,"delete"),a()()}}function ut(e,r){if(e&1){let t=x();l(0,"button",16),C("click",function(){_(t);let n=c();return h(n.fileRetry.next(n.file.id))}),l(1,"mat-icon"),m(2,"refresh"),a()()}}var $e=(()=>{let r=class r{constructor(){this.progressBarColor="primary",this.fileDelete=new P,this.fileRetry=new P}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=M({type:r,selectors:[["dominus-uploader-image"]],inputs:{fileIndex:"fileIndex",file:"file",uploadProgress:"uploadProgress",progressBarColor:"progressBarColor",imagePreviewStyles:"imagePreviewStyles",error:"error",allowDeleteAction:"allowDeleteAction"},outputs:{fileDelete:"fileDelete",fileRetry:"fileRetry"},standalone:!0,features:[b],decls:7,vars:4,consts:[[1,"images-container"],[1,"image-preview"],["alt","",3,"ngStyle","src",4,"ngIf"],[4,"ngIf"],[1,"actions"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["alt","",3,"ngStyle","src"],["class","overlay",4,"ngIf"],["class","loader","mode","determinate",3,"color","value",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"overlay"],["mode","determinate",1,"loader",3,"color","value"],[1,"error-container"],[1,"error"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"]],template:function(n,o){n&1&&(l(0,"div",0)(1,"div",1),f(2,lt,1,2,"img",2)(3,ct,4,3,"ng-container",3),l(4,"div",4),f(5,dt,3,0,"button",5)(6,ut,3,0,"button",6),a()()()),n&2&&(s(2),p("ngIf",o.file.imagePreviewUrl),s(1),p("ngIf",o.file.id),s(2),p("ngIf",o.allowDeleteAction&&o.file.progress===void 0),s(1),p("ngIf",o.file.id&&o.error!==""))},dependencies:[O,F,z,q,H,T,U,A,N],styles:[".images-container[_ngcontent-%COMP%]{width:auto;height:auto}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:auto;height:auto;margin:10px 5px;position:relative}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:contain;width:auto;height:100%}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:var(--dominus-uploader-image-uploading-overlay, rgba(255, 255, 255, .6));position:absolute;width:auto;height:auto;inset:0}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{width:auto;position:absolute;top:50%;left:10%;right:10%}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{background-color:var(--dominus-uploader-image-error-container-background, rgba(255, 255, 255, .6))}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--dominus-uploader-error-color, #f44336)}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;top:-20px;left:3px}"],changeDetection:0});let e=r;return e})();var g=function(e){return e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.INVALID_EXTENSION=1]="INVALID_EXTENSION",e[e.MAX_SIZE_EXCEEDED=2]="MAX_SIZE_EXCEEDED",e[e.ALLOWED_EXTENSIONS=3]="ALLOWED_EXTENSIONS",e[e.MULTIPLE_NO_FILES_MESSAGE=4]="MULTIPLE_NO_FILES_MESSAGE",e[e.MULTIPLE_ADD_FILES_BTN=5]="MULTIPLE_ADD_FILES_BTN",e[e.SINGLE_NO_FILES_MESSAGE=6]="SINGLE_NO_FILES_MESSAGE",e[e.NO_IMAGE_MESSAGE=7]="NO_IMAGE_MESSAGE",e[e.IMAGE_SIZE_CHECK_FAILED=8]="IMAGE_SIZE_CHECK_FAILED",e[e.IMAGE_SIZE_CHECK_TEXT=9]="IMAGE_SIZE_CHECK_TEXT",e}(g||{}),Je=new ne("Dominus uploader i18n strings");var gt=["uploaderContainer"],_t=["fileInput"];function ht(e,r){if(e&1){let t=x();l(0,"dominus-uploader-file",14),C("fileDelete",function(n){_(t);let o=c(3);return h(o.removeFile(n))}),a()}if(e&2){let t=r.$implicit,i=r.index,n=c(3);p("fileIndex",i)("imagePreviewStyles",n.imagePreviewStyles)("file",t)("progressBarColor",n.progressBarColor)("allowDeleteAction",n.allowDeleteAction)("showImagePreview",n.showImagePreview)}}function Ct(e,r){if(e&1){let t=x();l(0,"dominus-uploader-file",15),C("fileRetry",function(n){_(t);let o=c(3);return h(o.retryUpload(n))}),a()}if(e&2){let t=r.$implicit,i=c(3);p("fileIndex",t[0])("error",t[1].error)("imagePreviewStyles",i.imagePreviewStyles)("uploadProgress",t[1].progress)("file",t[1])("progressBarColor",i.progressBarColor)("allowDeleteAction",i.allowDeleteAction)("showImagePreview",i.showImagePreview)}}function xt(e,r){if(e&1&&(I(0),f(1,ht,1,6,"dominus-uploader-file",12)(2,Ct,1,8,"dominus-uploader-file",13),S()),e&2){let t=c(2);s(1),p("ngForOf",t._value),s(1),p("ngForOf",t.filesQueue.entries())}}function Et(e,r){if(e&1&&(l(0,"span",19)(1,"span"),m(2),a(),m(3),a()),e&2){let t=c(3);s(2),w(t.intl[t.DominusUploaderIntl.ALLOWED_EXTENSIONS]),s(1),G(" ",t.allowedExtensions.join(", ")," ")}}function vt(e,r){if(e&1&&(l(0,"span"),m(1),a()),e&2){let t=c(3);s(1),X("",t.intl[t.DominusUploaderIntl.IMAGE_SIZE_CHECK_TEXT]," ",t.maxImageSizeText,"")}}function wt(e,r){if(e&1&&(l(0,"div",16)(1,"h3"),m(2),a(),f(3,Et,4,2,"span",17)(4,vt,2,2,"span",18),a()),e&2){let t=c(2);s(2),w(t.intl[t.DominusUploaderIntl.MULTIPLE_NO_FILES_MESSAGE]),s(1),p("ngIf",t.allowedExtensions.length),s(1),p("ngIf",t.maxImageSizeText)}}function It(e,r){if(e&1){let t=x();I(0),l(1,"div",8)(2,"button",9),C("click",function(){_(t);let n=c();return h(n.openFilesInput())}),l(3,"mat-icon"),m(4,"add"),a(),m(5),a()(),f(6,xt,3,2,"ng-container",10)(7,wt,5,3,"ng-template",null,11,W),S()}if(e&2){let t=j(8),i=c();s(5),G(" ",i.intl[i.DominusUploaderIntl.MULTIPLE_ADD_FILES_BTN]," "),s(1),p("ngIf",i.hasFiles||i.filesQueue.has(i.lastFileId))("ngIfElse",t)}}function St(e,r){if(e&1){let t=x();l(0,"dominus-uploader-file",22),C("fileDelete",function(n){_(t);let o=c(2);return h(o.removeFile(n))})("fileRetry",function(n){_(t);let o=c(2);return h(o.retryUpload(n))}),a()}if(e&2){let t=c(2),i,n;p("fileIndex",0)("imagePreviewStyles",t.imagePreviewStyles)("error",((i=t.filesQueue.get(t.lastFileId))==null?null:i.error)||"")("uploadProgress",(n=t.filesQueue.get(t.lastFileId))==null?null:n.progress)("file",t.hasFiles?t._value[0]:t.filesQueue.get(t.lastFileId))("progressBarColor",t.progressBarColor)}}function yt(e,r){if(e&1){let t=x();I(0),l(1,"div",8)(2,"button",20),C("click",function(){_(t);let n=c();return h(n.openFilesInput())}),l(3,"mat-icon"),m(4,"attach_file"),a()()(),f(5,St,1,6,"dominus-uploader-file",21),S()}if(e&2){let t=c();s(5),p("ngIf",t.hasFiles||t.filesQueue.has(t.lastFileId))}}function Mt(e,r){if(e&1){let t=x();l(0,"dominus-uploader-image",27),C("fileDelete",function(n){_(t);let o=c(4);return h(o.removeFile(n))}),a()}if(e&2){let t=r.$implicit,i=r.index,n=c(4);p("fileIndex",i)("file",t)("progressBarColor",n.progressBarColor)("imagePreviewStyles",n.imagePreviewStyles)("allowDeleteAction",n.allowDeleteAction)}}function Dt(e,r){if(e&1&&(I(0),f(1,Mt,1,5,"dominus-uploader-image",26),S()),e&2){let t=c(3);s(1),p("ngForOf",t._value)}}function Pt(e,r){if(e&1){let t=x();l(0,"dominus-uploader-image",28),C("fileRetry",function(n){_(t);let o=c(3);return h(o.retryUpload(n))}),a()}if(e&2){let t=r.$implicit,i=c(3);p("fileIndex",t[0])("error",t[1].error)("uploadProgress",t[1].progress)("file",t[1])("progressBarColor",i.progressBarColor)("imagePreviewStyles",i.imagePreviewStyles)("allowDeleteAction",i.allowDeleteAction)}}function bt(e,r){if(e&1&&(I(0),l(1,"div",24),f(2,Dt,2,1,"ng-container",18)(3,Pt,1,7,"dominus-uploader-image",25),a(),S()),e&2){let t=c(2);s(2),p("ngIf",t.multiple||t.filesQueue.size===0),s(1),p("ngForOf",t.filesQueue.entries())}}function Ot(e,r){if(e&1){let t=x();I(0),l(1,"div",8)(2,"button",23),C("click",function(){_(t);let n=c();return h(n.openFilesInput())}),l(3,"mat-icon"),m(4,"add"),a()()(),f(5,bt,4,2,"ng-container",10),S()}if(e&2){let t=c(),i=j(7);s(5),p("ngIf",t.hasFiles||t.filesQueue.has(t.lastFileId))("ngIfElse",i)}}function Ft(e,r){if(e&1&&(l(0,"span",19)(1,"span"),m(2),a(),m(3),a()),e&2){let t=c(2);s(2),w(t.intl[t.DominusUploaderIntl.ALLOWED_EXTENSIONS]),s(1),G(" ",t.allowedExtensions.join(", ")," ")}}function Ut(e,r){if(e&1&&(l(0,"span"),m(1),a()),e&2){let t=c(2);s(1),X("",t.intl[t.DominusUploaderIntl.IMAGE_SIZE_CHECK_TEXT]," ",t.maxImageSizeText,"")}}function Tt(e,r){if(e&1&&(l(0,"div",16)(1,"h3"),m(2),a(),f(3,Ft,4,2,"span",17)(4,Ut,2,2,"span",18),a()),e&2){let t=c();s(2),w(t.intl[t.DominusUploaderIntl.NO_IMAGE_MESSAGE]),s(1),p("ngIf",t.allowedExtensions.length),s(1),p("ngIf",t.maxImageSizeText)}}var Ye=(()=>{let r=class r extends je{constructor(i,n,o,d,u){super(o),this.http=i,this.changeDetector=n,this.parentFormField=u,this.id=`dm-uploader-${r.nextId++}`,this.fileSaveEndpointRequestMethod="POST",this.fileDeleteEndpointRequestMethod="DELETE",this.multiple=!1,this.type="file-uploader",this.progressBarColor="primary",this.allowedExtensions=[],this.maxFileSize=5*1024*1024,this.allowDeleteAction=!0,this.showImagePreview=!0,this.imagePreviewStyles={"max-width":"200px"},this.uploadFinished=new P,this.containerClasses={container:!0,multiple:!1,"mat-form-field":!1,dragover:!1,"image-uploader":!1},this._value=[],this.lastFileId=0,this.filesQueue=new Map,this.uploaderType="",this.maxImageSizeText="",this.hasFiles=!1,this.DominusUploaderIntl=g,this.componentDestroyed$=new ee,this.containerClasses["mat-form-field"]=!!u,this.intl=Object.assign({[g.UNKNOWN_ERROR]:"Upload Failed!",[g.INVALID_EXTENSION]:"Invalid file extension!",[g.MAX_SIZE_EXCEEDED]:"File size is too big!",[g.MULTIPLE_NO_FILES_MESSAGE]:"Drop files here.",[g.SINGLE_NO_FILES_MESSAGE]:"No file",[g.ALLOWED_EXTENSIONS]:"Allowed Extensions:",[g.MULTIPLE_ADD_FILES_BTN]:"Add files",[g.NO_IMAGE_MESSAGE]:"Drop images here.",[g.IMAGE_SIZE_CHECK_FAILED]:"Maximum width or height exceeded.",[g.IMAGE_SIZE_CHECK_TEXT]:"Allowed image dimensions (HxW):"},d||{})}ngOnChanges(){this.uploaderType=this.type+(this.multiple?"-multiple":"-single"),this.containerClasses.multiple=this.multiple,this.containerClasses["image-uploader"]=this.type==="image-uploader",this.maxImageSize?.length&&(this.maxImageSizeText=this.maxImageSize.map(i=>i.height+"x"+i.width).join(", ")),this.changeDetector.markForCheck(),this.stateChanges.next()}ngAfterViewInit(){let i=this.parentFormField?._elementRef.nativeElement||this.uploaderContainer.nativeElement;L(i,"dragover").pipe(B(this.componentDestroyed$)).subscribe(n=>this.onDragOver(n)),L(i,"dragleave").pipe(B(this.componentDestroyed$)).subscribe(n=>this.onDragLeave(n)),L(i,"drop").pipe(B(this.componentDestroyed$)).subscribe(n=>this.onFilesDropped(n))}openFilesInput(){this.fileInput.nativeElement.click()}get value(){return this._value}set value(i){if(i=i||[],!Array.isArray(i))throw new Error("Uploader value must be an array of type DominusFile[].");this._value=i,this.hasFiles=this._value.length>0,this.onChange(i),this.changeDetector.markForCheck(),this.stateChanges.next()}get shouldLabelFloat(){return!0}get empty(){return this.value.length===0}onFilesAdded(i){if(!(i&&i.length))return;let n=this.multiple?i:[i[0]];for(let o=n.length;o--;){let d=n[o];this.checkFile(d).then(u=>{let y={id:++this.lastFileId,name:d.name,progress:0,size:d.size,error:u,canRetryUpload:u==="",imagePreviewUrl:d.type.includes("image")?URL.createObjectURL(d):"",file:d};this.filesQueue.set(y.id,y),u===""?this.uploadFile(y).then():this.changeDetector.markForCheck()})}this.fileInput.nativeElement.value=""}uploadFile(i){return R(this,null,function*(){let n=new FormData,o=i.file;n.append("file",o);let d=this.fileSaveEndpointRequestHeaders instanceof Promise?yield this.fileSaveEndpointRequestHeaders:this.fileSaveEndpointRequestHeaders;this.http.request(this.fileSaveEndpointRequestMethod,this.fileSaveEndpoint,{reportProgress:!0,observe:"events",body:n,headers:d}).pipe(ie(()=>(i.error=this.intl[g.UNKNOWN_ERROR],i.progress=0,this.changeDetector.markForCheck(),te(null)))).subscribe(u=>{if(u)switch(u.type){case $.UploadProgress:i.progress=Math.floor(u.loaded/(u.total||1)*100),this.changeDetector.markForCheck();break;case $.Response:this.multiple||(this._value=[]),this._value.push({name:o.name,size:o.size,type:o.type,imagePreviewUrl:o.type.includes("image")?URL.createObjectURL(o):"",data:u.body||{}}),this.filesQueue.delete(i.id),this.hasFiles=!0,this.changeDetector.markForCheck(),this.stateChanges.next(),this.onChange(this.value),this.uploadFinished.next(this.value);break}})})}retryUpload(i){let n=this.filesQueue.get(i);if(n){if(!n.canRetryUpload){this.filesQueue.delete(i);return}this.uploadFile(n).then()}}removeFile(i){return R(this,null,function*(){let n=this._value.splice(i,1)[0];if(this.fileDeleteEndpoint){let o=this.fileDeleteEndpointRequestHeaders instanceof Promise?yield this.fileDeleteEndpointRequestHeaders:this.fileDeleteEndpointRequestHeaders;this.http.request(this.fileDeleteEndpointRequestMethod,this.fileDeleteEndpoint,{body:[n],headers:o}).subscribe()}this.hasFiles=this._value.length>0,this.changeDetector.markForCheck()})}onDragOver(i){i.preventDefault(),i.stopPropagation(),this.containerClasses.dragover=!0,this.changeDetector.markForCheck()}onDragLeave(i){i.preventDefault(),i.stopPropagation(),this.containerClasses.dragover=!1,this.changeDetector.markForCheck()}onFilesDropped(i){let n=i.dataTransfer?.files;n&&(i.preventDefault(),i.stopPropagation(),this.onFilesAdded(n)),this.containerClasses.dragover=!1,this.changeDetector.markForCheck()}checkFile(i){return R(this,null,function*(){let n=this.allowedExtensions;if(n.length){let o=i.name.lastIndexOf("."),d;if(o<0)d=!1;else{let u=i.name.substring(o+1).toLowerCase();d=n.indexOf(u)!==-1}if(!d)return this.intl[g.INVALID_EXTENSION]}if(i.size>this.maxFileSize)return this.intl[g.MAX_SIZE_EXCEEDED];if(i.type.includes("image")&&this.maxImageSize?.length){let o=this.maxImageSize,d=yield this.getImageSize(URL.createObjectURL(i)),u=!0;for(let y=o.length;y--;){let E=o[y];if(E.width!==void 0&&E.height!==void 0&&E.width===d.width&&E.height===d.height){u=!1;break}else if(E.width!==void 0&&E.height===void 0&&E.width===d.width){u=!1;break}else if(E.height!==void 0&&E.width===void 0&&E.height===d.height){u=!1;break}}if(u)return this.intl[g.IMAGE_SIZE_CHECK_FAILED]}return""})}getImageSize(i){return R(this,null,function*(){return new Promise((n,o)=>{let d=new Image;d.onload=()=>{n({width:d.width,height:d.height})},d.onerror=()=>{o("Error loading image")},d.src=i})})}ngOnDestroy(){super.ngOnDestroy(),this.componentDestroyed$.next(),this.componentDestroyed$.complete()}};r.nextId=0,r.\u0275fac=function(n){return new(n||r)(D(he),D(re),D(De,10),D(Je,8),D(ye,8))},r.\u0275cmp=M({type:r,selectors:[["dm-uploader"]],viewQuery:function(n,o){if(n&1&&(K(gt,5),K(_t,5)),n&2){let d;Q(d=Z())&&(o.uploaderContainer=d.first),Q(d=Z())&&(o.fileInput=d.first)}},inputs:{fileSaveEndpoint:"fileSaveEndpoint",fileSaveEndpointRequestMethod:"fileSaveEndpointRequestMethod",fileSaveEndpointRequestHeaders:"fileSaveEndpointRequestHeaders",fileDeleteEndpoint:"fileDeleteEndpoint",fileDeleteEndpointRequestMethod:"fileDeleteEndpointRequestMethod",fileDeleteEndpointRequestHeaders:"fileDeleteEndpointRequestHeaders",multiple:"multiple",type:"type",progressBarColor:"progressBarColor",allowedExtensions:"allowedExtensions",maxFileSize:"maxFileSize",allowDeleteAction:"allowDeleteAction",showImagePreview:"showImagePreview",imagePreviewStyles:"imagePreviewStyles",maxImageSize:"maxImageSize",value:"value"},outputs:{uploadFinished:"uploadFinished"},standalone:!0,features:[se([{provide:Se,useExisting:r}]),ae,oe,b],decls:10,vars:6,consts:[[3,"ngClass"],["uploaderContainer",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["noImagePlaceholder",""],["type","file",3,"accept","multiple","change"],["fileInput",""],[1,"actions"],["type","button","mat-raised-button","","color","primary",3,"click"],[4,"ngIf","ngIfElse"],["noFilesMultiple",""],["error","",3,"fileIndex","imagePreviewStyles","file","progressBarColor","allowDeleteAction","showImagePreview","fileDelete",4,"ngFor","ngForOf"],[3,"fileIndex","error","imagePreviewStyles","uploadProgress","file","progressBarColor","allowDeleteAction","showImagePreview","fileRetry",4,"ngFor","ngForOf"],["error","",3,"fileIndex","imagePreviewStyles","file","progressBarColor","allowDeleteAction","showImagePreview","fileDelete"],[3,"fileIndex","error","imagePreviewStyles","uploadProgress","file","progressBarColor","allowDeleteAction","showImagePreview","fileRetry"],[1,"no-files-multiple"],["class","allowed-extensions",4,"ngIf"],[4,"ngIf"],[1,"allowed-extensions"],["mat-mini-fab","","type","button","color","primary",1,"upload-btn",3,"click"],[3,"fileIndex","imagePreviewStyles","error","uploadProgress","file","progressBarColor","fileDelete","fileRetry",4,"ngIf"],[3,"fileIndex","imagePreviewStyles","error","uploadProgress","file","progressBarColor","fileDelete","fileRetry"],["type","button","mat-mini-fab","","color","primary",3,"click"],[1,"image-previews"],[3,"fileIndex","error","uploadProgress","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileRetry",4,"ngFor","ngForOf"],["error","",3,"fileIndex","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileDelete",4,"ngFor","ngForOf"],["error","",3,"fileIndex","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileDelete"],[3,"fileIndex","error","uploadProgress","file","progressBarColor","imagePreviewStyles","allowDeleteAction","fileRetry"]],template:function(n,o){n&1&&(l(0,"div",0,1),I(2,2),f(3,It,9,3,"ng-container",3)(4,yt,6,1,"ng-container",3)(5,Ot,6,2,"ng-container",4)(6,Tt,5,3,"ng-template",null,5,W),S(),a(),l(8,"input",6,7),C("change",function(u){return o.onFilesAdded(u.target.files)}),a()),n&2&&(p("ngClass",o.containerClasses),s(2),p("ngSwitch",o.uploaderType),s(1),p("ngSwitchCase","file-uploader-multiple"),s(1),p("ngSwitchCase","file-uploader-single"),s(4),p("accept",o.allowedExtensions.length?"."+o.allowedExtensions.join(",."):null)("multiple",o.multiple))},dependencies:[O,ce,de,F,ue,fe,ge,A,N,T,we,U,We,$e],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100px;padding:10px}.container.multiple[_ngcontent-%COMP%]:not(.mat-form-field), .container.image-uploader[_ngcontent-%COMP%]:not(.mat-form-field){border:1px dotted var(--dominus-uploader-file-default-border-color, #cecece)}.container.multiple[_ngcontent-%COMP%]:not(.mat-form-field).dragover, .container.image-uploader[_ngcontent-%COMP%]:not(.mat-form-field).dragover{border-color:var(--dominus-uploader-file-hover-border-color, cornflowerblue)}.container[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .no-files-multiple[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .no-files-single[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .no-files-single[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:15px}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;margin-bottom:25px}.container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}"],changeDetection:0});let e=r;return e})();var et={html:`
<form [formGroup]="form">
    <h3>Configuration</h3>

    <section formGroupName="config" class="dm:grid">
        <mat-form-field class="dm:col-fixed">
            <mat-label>Type</mat-label>
            <mat-select formControlName="type">
                <mat-option value="file-uploader">file-uploader</mat-option>
                <mat-option value="image-uploader">image-uploader</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-checkbox color="primary" formControlName="multiple" class="dm:col-fixed">Multiple</mat-checkbox>
    </section>

    <br>
    <h3>Result</h3>
    <mat-form-field class="dm:col-12">
        <mat-label>Uploader</mat-label>
        <dm-uploader
            formControlName="value"
            [multiple]="!!form.get(['config', 'multiple'])?.value"
            [type]="form.get(['config', 'type'])?.value || 'file-uploader'"
            [allowedExtensions]="form.get(['config', 'allowedExtensions'])?.value || ['txt', 'pdf']"
            fileSaveEndpoint="https://localhost/uploader/upload"
            fileDeleteEndpoint="https://localhost/uploader/delete"></dm-uploader>
    </mat-form-field>
</form>
<br><br>
<h3>Form Value</h3>
<pre>{{ form.get('value')?.value | json }}</pre>
    `,ts:`
import {Component} from '@angular/core';
import {CommonModule} from '@angular/common';
import {MatCardModule} from "@angular/material/card";
import {MatTabsModule} from "@angular/material/tabs";
import {ReactiveFormsModule, UntypedFormBuilder, UntypedFormGroup} from "@angular/forms";
import {DmUploaderComponent} from "../../../../../dm-uploader/src/lib/dm-uploader.component";
import {UploaderDocsComponent} from "./uploader-docs/uploader-docs.component";
import {MatInputModule} from "@angular/material/input";
import {MatCheckboxModule} from "@angular/material/checkbox";
import {MatSelectModule} from "@angular/material/select";
import {ComponentDocHeaderComponent} from "../../components/component-doc-header/component-doc-header.component";
import {CodeExampleComponent} from "../../components/code-example/code-example.component";
import {dmUploaderCodeExample} from "./dm-uploader-code-example";

@Component({
    selector: 'app-dm-uploader-docs',
    standalone: true,
    imports: [CommonModule, MatCardModule, MatTabsModule, ReactiveFormsModule, DmUploaderComponent, UploaderDocsComponent, MatInputModule, MatCheckboxModule, MatSelectModule, ComponentDocHeaderComponent, CodeExampleComponent],
    templateUrl: './dm-uploader-docs.component.html',
    styleUrl: './dm-uploader-docs.component.scss'
})
export class DmUploaderDocsComponent {
    form: UntypedFormGroup;

    constructor(
        fb: UntypedFormBuilder,
    ) {
        this.form = fb.group({
            value: [[]],
            config: fb.group({
                multiple: [true],
                type: ['file-uploader'],
                allowedExtensions: [['txt', 'pdf']]
            })
        });
    }
}
    `,styles:""};var Nt=()=>["config","multiple"],At=()=>["config","type"],Rt=()=>["config","allowedExtensions"],kt=()=>["txt","pdf"],Qi=(()=>{let r=class r{constructor(i){this.dmUploaderCodeExample=et,this.form=i.group({value:[[]],config:i.group({multiple:[!0],type:["file-uploader"],allowedExtensions:[["txt","pdf"]]})})}};r.\u0275fac=function(n){return new(n||r)(D(Ne))},r.\u0275cmp=M({type:r,selectors:[["app-dm-uploader-docs"]],standalone:!0,features:[b],decls:74,vars:20,consts:[["title","Dominus uploader","titleLink","https://www.npmjs.com/package/@ng-dominus/dm-uploader"],["label","Overview"],[3,"code"],[3,"formGroup"],["formGroupName","config",1,"dm:grid"],[1,"dm:col-fixed"],["formControlName","type"],["value","file-uploader"],["value","image-uploader"],["color","primary","formControlName","multiple",1,"dm:col-fixed"],[1,"dm:col-12"],["formControlName","value","fileSaveEndpoint","https://localhost/uploader/upload","fileDeleteEndpoint","https://localhost/uploader/delete",3,"multiple","type","allowedExtensions"],["label","Api"],["label","Internationalization"],[1,"dm:quote"],[1,"dm:quote","code"],["label","Styling"]],template:function(n,o){if(n&1&&(l(0,"app-component-doc-header",0)(1,"p"),m(2,"Angular material based library that handles file uploads."),a()(),l(3,"mat-card")(4,"mat-card-content")(5,"mat-tab-group")(6,"mat-tab",1)(7,"mat-card-content")(8,"app-code-example",2)(9,"form",3)(10,"h3"),m(11,"Configuration"),a(),l(12,"section",4)(13,"mat-form-field",5)(14,"mat-label"),m(15,"Type"),a(),l(16,"mat-select",6)(17,"mat-option",7),m(18,"file-uploader"),a(),l(19,"mat-option",8),m(20,"image-uploader"),a()()(),l(21,"mat-checkbox",9),m(22,"Multiple"),a()(),v(23,"br"),l(24,"h3"),m(25,"Result"),a(),l(26,"mat-form-field",10)(27,"mat-label"),m(28,"Uploader"),a(),v(29,"dm-uploader",11),a()(),v(30,"br")(31,"br"),l(32,"h3"),m(33,"Form Value"),a(),l(34,"pre"),m(35),me(36,"json"),a()()()(),l(37,"mat-tab",12)(38,"mat-card-content"),v(39,"app-uploader-docs"),a()(),l(40,"mat-tab",13)(41,"mat-card-content")(42,"p"),m(43,"Internationalization can be achieved by using the "),l(44,"span",14),m(45,"DOMINUS_UPLOADER_INTL"),a(),m(46," injection token, and passing an object of strings using the "),l(47,"span",14),m(48,"DominusUploaderIntl"),a(),m(49," members as keys."),a(),l(50,"pre")(51,"code",15),m(52),a()()()(),l(53,"mat-tab",16)(54,"mat-card-content")(55,"p"),m(56,"Override colors using the following css variables:"),a(),l(57,"ul")(58,"li")(59,"span",14),m(60,"--dominus-uploader-error-color"),a(),m(61,": Error text color"),a(),l(62,"li")(63,"span",14),m(64,"--dominus-uploader-file-hover-border-color"),a(),m(65,": Border color when hovering over with a file"),a(),l(66,"li")(67,"span",14),m(68,"--dominus-uploader-image-uploading-overlay"),a(),m(69,": Overlay color applied to images that are uploading "),a(),l(70,"li")(71,"span",14),m(72,"--dominus-uploader-image-error-container-background"),a(),m(73,": Background colo applied to the error container "),a()()()()()()()),n&2){let d,u,y,E;s(8),p("code",o.dmUploaderCodeExample),s(1),p("formGroup",o.form),s(20),p("multiple",!!((d=o.form.get(k(16,Nt)))!=null&&d.value))("type",((u=o.form.get(k(17,At)))==null?null:u.value)||"file-uploader")("allowedExtensions",((y=o.form.get(k(18,Rt)))==null?null:y.value)||k(19,kt)),s(6),w(pe(36,14,(E=o.form.get("value"))==null?null:E.value)),s(17),le("@Component(","{",`
    ...
    providers: [`,"{",`
        provide: DOMINUS_UPLOADER_INTL,
        useValue: `,"{",`
            [DominusUploaderIntl.UNKNOWN_ERROR]: 'Upload Failed'
            ...
        `,"}",`
    `,"}",`]
`,"}",`)
export class UploaderDemoComponent `,"{",`
    ...
`,"}","")}},dependencies:[O,_e,ve,xe,Ee,He,Ge,ze,Ae,Oe,Pe,be,Fe,Te,Ue,Ye,Xe,Qe,Me,Ie,Be,Le,ke,Re,Ce,Ve,qe]});let e=r;return e})();export{Qi as DmUploaderDocsComponent};
